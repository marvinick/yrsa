<p class="heading has-text-centered">Back to project <%= link_to set_project.title, account_project_path(current_account, set_project) %></p>

<div class="item">
  <p class="title is-2 has-text-centered"><%= @item.name %></p>

  <nav class="level">
    <div class="level-item has-text-centered">
      <div>
        <p class="level-item has-text-centered title is-6">
          <%= @item.content.first(50) %>
        </p>
      </div>
    </div>
  </nav>

  <nav class="level is-mobile">
    <div class="level-item has-text-centered">
      <div>
        <p class="title"><%= link_to "Edit", edit_account_project_item_path(current_account, set_project, @item), class: "button is-small is-info" %>
      </div>
    </div>

    <div class="level-item has-text-centered">
      <div>
        <p class="title">  <%= link_to "Delete", [current_account, set_project, @item], method: :delete, data: { confirm: "Are you sure you want to remove this?"}, class: "button is-small is-danger" %></p>
      </div>
    </div>
  </nav>

  <hr>

  <% @item.details.each do |detail| %>
    <div class="columns">
      <div class="column is-6 has-text-centered">
        <p class="title is-4 "><%= link_to detail.name, account_project_item_detail_path(current_account, set_project, @item, detail) %></p>
        <p class="subtitle is-6 "><%= detail.description %></p>
        <%= link_to "Rate it", new_account_project_item_detail_review_path(current_account, set_project, @item, detail), class: "button is-primary is-small" %>
      </div>
      <div class="column is-6 has-text-centered">
        <% detail.reviews.last(3).each do |review| %>
          <div class="star-rating" data-score= <%= review.value %> ></div>
          <li><p class="subtitle is-6"><%= review.description.first(30) %></p></li>
          <br>
        <% end %>
      </div>
    </div>
    <hr>
  <% end %>
</div>

<script>
  $('.star-rating').raty({
    path: '/assets/',
    readOnly: true,
    score: function() {
      return $(this).attr('data-score');
    }
  });
</script>
